// Create new region
with [get-editor "NewModel State Machine Diagram"] {
    with [get-palette | get-palette-entry Region] {
        mouse-move 66 5 button1 -height 23 -width 134
        mouse-press 66 5 button1 -height 23 -width 134
        mouse-release 66 5 button1 524288 -height 23 -width 134
    }
    with [get-diagram -index 1 | get-edit-part -name "NewModel State Machine Diagram" | get-edit-part -name NewModel 
        | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        mouse-move 636 41 button1 -height 521 -width 916
        mouse-press 636 41 button1 -height 521 -width 916
        mouse-release 636 41 button1 524288 -height 521 -width 916
    }
}
// Check diagram
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart] {
    get-edit-part -name Region1 | get-edit-part -name Region1 
    get-edit-part -name Region2 | get-edit-part -name Region2 
}


// Check model
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart] {
    with [get-edit-part -name Region2 | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        get-property "element.target.name" | equals Region2 | verify-true
    }
}

 //Try to create region in a region (add new region to parent state machine)
 with [get-editor "NewModel State Machine Diagram"] {
    with [get-palette | get-palette-entry Region] {
        mouse-move 20 15 button1 -height 23 -width 134
        mouse-press 20 15 button1 -height 23 -width 134
        mouse-release 20 15 button1 524288 -height 23 -width 134
    }
    with [get-diagram -index 1] {
        with [get-edit-part -name "NewModel State Machine Diagram"] {
            with [get-edit-part -name NewModel | get-edit-part 
                -className DNodeContainerViewNodeContainerCompartmentEditPart] {
               with [get-edit-part -name Region1 | get-edit-part 
                    -className DNodeContainerViewNodeContainerCompartment2EditPart] {
                    mouse-move 423 158 button1 -height 481 -width 571
                    mouse-press 423 158 button1 -height 481 -width 571
                    mouse-release 423 158 button1 524288 -height 481 -width 571
                }
            }
        }
    }
}
// Check diagram
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart] {
    get-edit-part -name Region1 | get-edit-part -name Region1
    get-edit-part -name Region2 | get-edit-part -name Region2
    get-edit-part -name Region3 | get-edit-part -name Region3
}
// Check model
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart] {
    with [get-edit-part -name Region3 | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        get-property "element.target.name" | equals Region3 | verify-true
    }
}


// Create a region in a state
// Create a region in previous state
with [get-editor "NewModel State Machine Diagram"] {   
    with [get-palette | get-palette-entry Region] {
        mouse-move 51 6 button1 -height 23 -width 134
        mouse-press 51 6 button1 -height 23 -width 134
        mouse-release 51 6 button1 524288 -height 23 -width 134
    }
    with [get-diagram -index 1 | get-edit-part -name "NewModel State Machine Diagram" | get-edit-part -name NewModel 
        | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name Region1 
        | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        with [get-edit-part -name State1 | get-edit-part -className DNodeListViewNodeListCompartmentEditPart] {
            mouse-move 49 20 button1 -height 163 -width 217
            mouse-press 49 20 button1 -height 163 -width 217
            mouse-release 49 20 button1 524288 -height 163 -width 217
        }
    }
}
// Check diagram
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
-name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name Region1 
    | get-edit-part -name Region1 | get-edit-part -name State1 | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart]{
	    get-edit-part -name Region1 | get-edit-part -name Region1 | get-property visible | equals true | verify-true
        get-property childrenCount | equals 1 | verify-true
    }

// Check Model
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name Region1 | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name State1 | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart] {
    get-property "element.target.name" | equals State1 | verify-true
    get-property "element.target.region.Region[0].name" | equals Region1 | verify-true
    get-property "element.name" | equals State1 | verify-true
}

// Create a region in a region of Sub-StateMachine
with [get-editor "NewModel State Machine Diagram"] {
    with [get-palette | get-palette-entry Region] {
        mouse-move 23 9 button1 -height 23 -width 178
        mouse-press 23 9 button1 -height 23 -width 178
        mouse-release 23 9 button1 524288 -height 23 -width 178
    }
    with [get-diagram -index 1 | get-edit-part -name "NewModel State Machine Diagram" | get-edit-part -name NewModel 
        | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        with [get-edit-part -name Region1 | get-edit-part -name Region1 | get-edit-part -name StateMachine2] {
            with [get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part 
                -name Region1 | get-edit-part -name Region1] {
                mouse-move 37 11 button1 -height 40 -width 97
                mouse-press 37 11 button1 -height 40 -width 97
                mouse-release 37 11 button1 524288 -height 40 -width 97
            }
        }
    }
 }
// Check diagram
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name Region1 | get-edit-part 
    -name Region1 | get-edit-part -name StateMachine2 | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart] {
    get-edit-part -name Region1 | get-edit-part -name Region1
    get-edit-part -name Region2 | get-edit-part -name Region2
}

// Create a region in a Sub-StateMachine
with [get-editor "NewModel State Machine Diagram"] {
    with [get-palette | get-palette-entry Region] {
        mouse-move 38 16 button1 -height 23 -width 178
        mouse-press 38 16 button1 -height 23 -width 178
        mouse-release 38 16 button1 524288 -height 23 -width 178
    }
    with [get-diagram -index 1 | get-edit-part -name "NewModel State Machine Diagram" | get-edit-part -name NewModel 
        | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        with [get-edit-part -name Region1 | get-edit-part -name Region1 | get-edit-part -name StateMachine2] {
            mouse-move 123 8 button1 -height 70 -width 141
            mouse-press 123 8 button1 -height 70 -width 141
            mouse-release 123 8 button1 524288 -height 70 -width 141
        }
    }
}
// Check diagram
with [get-editor "NewModel State Machine Diagram" | get-diagram -index 1 | get-edit-part 
    -name "NewModel State Machine Diagram" | get-edit-part -name NewModel | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name Region1 | get-edit-part 
    -name Region1 | get-edit-part -name StateMachine2 | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart] {
    get-edit-part -name Region1 | get-edit-part -name Region1
    get-edit-part -name Region2 | get-edit-part -name Region2
    get-edit-part -name Region3 | get-edit-part -name Region3
}