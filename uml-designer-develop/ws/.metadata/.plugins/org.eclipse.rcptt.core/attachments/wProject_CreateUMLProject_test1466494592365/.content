// Create new UML project
get-menu "File/New/Project..." | click
with [get-window "New Project"] {
    get-tree | select "UML Designer/UML Project"
    get-button "Next >" | click
    get-editbox -after [get-label "Project name:"] | set-text test
    get-button "Next >" | click
    get-button Finish | click
}


// Check Modeling perspective is active
get-window "Open Associated Perspective?" | get-button Yes | click
with [get-button Modeling] {
    get-property "isEnabled()" | equals true | verify-true
    get-property "getText()" | equals Modeling | verify-true
}

// Check dashboard diagram is opened automatically
get-editor Dashboard | get-diagram -index 1 | get-edit-part -name Dashboard | get-property "diagram.element.name" 
    | equals Dashboard | verify-true

// Check UML viewpoints are enabled
get-view "Model Explorer" | get-tree | select test | get-menu "Viewpoints Selection" | click
get-window "Viewpoints Selection" | get-table | select Capture
with [get-window "Viewpoints Selection" | get-table] {
    get-property "getItemCount()" | equals 6 | verify-true
    get-property "getItems().TableItem[0].getText()" | equals Capture | verify-true
    get-property "getItems().TableItem[0].getChecked()" | equals true | verify-true
    get-property "getItems().TableItem[1].getText()" | equals Dashboard | verify-true
    get-property "getItems().TableItem[1].getChecked()" | equals true | verify-true
    get-property "getItems().TableItem[2].getText()" | equals Design | verify-true
    get-property "getItems().TableItem[2].getChecked()" | equals true | verify-true
    get-property "getItems().TableItem[3].getText()" | equals Extend | verify-true
    get-property "getItems().TableItem[3].getChecked()" | equals true | verify-true
    get-property "getItems().TableItem[4].getText()" | equals Reused | verify-true
    get-property "getItems().TableItem[4].getChecked()" | equals true | verify-true
    get-property "getItems().TableItem[5].getText()" | equals Review | verify-true
    get-property "getItems().TableItem[5].getChecked()" | equals true | verify-true
}
get-window "Viewpoints Selection" | get-button OK | click

// Check new UML project content
get-view "Model Explorer" | get-tree | expand-all